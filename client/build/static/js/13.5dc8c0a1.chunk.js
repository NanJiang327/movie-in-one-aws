(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{453:function(e,t,n){"use strict";t.a={douban:{basicUrl:"https://api.douban.com/v2/movie/"},tmdb:{basicUrl:"https://api.themoviedb.org/3/movie/",castUrl:"https://api.themoviedb.org/3/person/",searchUrl:"https://api.themoviedb.org/3/search/movie",backdropUrl:"https://image.tmdb.org/t/p/w1400_and_h450_face",bgUrl:"https://image.tmdb.org/t/p/original/",apiKey:"bb3f5acf00144cfacd624c940807a5c4",genres_en:[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}],genres_cn:[{id:28,name:"\u52a8\u4f5c"},{id:12,name:"\u5192\u9669"},{id:16,name:"\u52a8\u753b"},{id:35,name:"\u559c\u5267"},{id:80,name:"\u72af\u7f6a"},{id:99,name:"\u7eaa\u5f55"},{id:18,name:"\u5267\u60c5"},{id:10751,name:"\u5bb6\u5ead"},{id:14,name:"\u5947\u5e7b"},{id:36,name:"\u5386\u53f2"},{id:27,name:"\u6050\u6016"},{id:10402,name:"\u97f3\u4e50"},{id:9648,name:"\u60ac\u7591"},{id:10749,name:"\u7231\u60c5"},{id:878,name:"\u79d1\u5e7b"},{id:10770,name:"\u7535\u89c6\u7535\u5f71"},{id:53,name:"\u60ca\u609a"},{id:10752,name:"\u6218\u4e89"},{id:37,name:"\u897f\u90e8"}]},HtmlUtil:{htmlEncodeByRegExp:function(e){return 0===e.length?"":e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")},htmlDecodeByRegExp:function(e){return 0===e.length?"":e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;/g," ").replace(/&#39;/g,"'").replace(/&quot;/g,'"')}}}},459:function(e,t,n){"use strict";var r=n(1),o=n.n(r),a=n(6),i=function(e){var t=e.name;return o.a.createElement("svg",{className:"icon-font "+t,"aria-hidden":"true"},o.a.createElement("use",{xlinkHref:"#icon-"+t}))};i.protoType={name:n.n(a).a.string.isRequired},t.a=i},468:function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"i",function(){return f}),n.d(t,"a",function(){return p}),n.d(t,"h",function(){return d}),n.d(t,"c",function(){return v}),n.d(t,"g",function(){return m}),n.d(t,"e",function(){return b}),n.d(t,"f",function(){return g}),n.d(t,"d",function(){return y});var r=n(460),o=n.n(r),a=n(14),i=n(453),l=function(e){return{type:a.f,payload:{nowShowingArr:e}}},c=function(e){return{type:a.h,payload:{upcomingArr:e}}},s=function(e){return{type:a.n,redirectTo:e}},u=function(e){return{type:a.b,language:e}},f=function(e){return{type:a.d,err:e}},p=function(e){return{type:a.a,id:e}},d=function(e){return{type:a.m,id:e}};function v(e,t){return function(n,r){e!==r().type&&n({type:a.c,fetchingType:e}),n({type:a.g});var s=i.a.tmdb.basicUrl+e+"?api_key="+i.a.tmdb.apiKey+"&language="+t+"&page=1&region=AU",u="now_playing"===e;o.a.get(s).then(function(e){var t=e.data.results;return n(u?l(t):c(t))}).catch(function(e){return n({type:a.e,error:!0,payload:e})})}}function m(e){return function(t,n){var r=e.username,i=e.email,l=e.password,c=e.language;o.a.post("/user/register",{username:r,email:i,password:l,language:c}).then(function(e){200===e.status&&0===e.data.code?(t({type:a.l,payload:e.data.data}),t(s("/")),t(u(c)),t(f(""))):t(f(e.data.msg))}).catch(function(e){console.log(e)})}}function b(e){return function(t,n){var r=e.username,i=e.password;o.a.post("/user/login",{username:r,password:i}).then(function(e){200===e.status&&0===e.data.code?(t({type:a.j,payload:e.data.data}),t(s(n().redirectTo)),t(u(e.data.data.language)),t(f(""))):t(f(e.data.msg))}).catch(function(e){console.log(e)})}}function g(){return function(e,t){o.a.get("/user/logout").then(function(t){e({type:a.k})}).catch(function(e){console.log(e)})}}function y(){return function(e,t){o.a.get("/user/info").then(function(t){0===t.data.code&&e({type:a.i,payload:t.data.data})}).catch(function(e){console.log(e)})}}},482:function(e,t,n){"use strict";var r=n(1),o=n.n(r);t.a=function(){return o.a.createElement("div",{className:"loading"},o.a.createElement("div",{className:"left circle"}),o.a.createElement("div",{className:"right circle"}))}},490:function(e,t,n){"use strict";var r=n(1),o=n.n(r),a=n(450),i=n(124),l=n.n(i),c=n(452),s=n.n(c),u=n(447),f=n.n(u),p=n(448),d=n.n(p),v=n(449),m=n.n(v),b=n(6),g=n.n(b),y=n(476),h={adjustX:1,adjustY:1},w=[0,0],O={left:{points:["cr","cl"],overflow:h,offset:[-4,0],targetOffset:w},right:{points:["cl","cr"],overflow:h,offset:[4,0],targetOffset:w},top:{points:["bc","tc"],overflow:h,offset:[0,-4],targetOffset:w},bottom:{points:["tc","bc"],overflow:h,offset:[0,4],targetOffset:w},topLeft:{points:["bl","tl"],overflow:h,offset:[0,-4],targetOffset:w},leftTop:{points:["tr","tl"],overflow:h,offset:[-4,0],targetOffset:w},topRight:{points:["br","tr"],overflow:h,offset:[0,-4],targetOffset:w},rightTop:{points:["tl","tr"],overflow:h,offset:[4,0],targetOffset:w},bottomRight:{points:["tr","br"],overflow:h,offset:[0,4],targetOffset:w},rightBottom:{points:["bl","br"],overflow:h,offset:[4,0],targetOffset:w},bottomLeft:{points:["tl","bl"],overflow:h,offset:[0,4],targetOffset:w},leftBottom:{points:["br","bl"],overflow:h,offset:[-4,0],targetOffset:w}},C=function(e){function t(){return f()(this,t),d()(this,e.apply(this,arguments))}return m()(t,e),t.prototype.componentDidUpdate=function(){var e=this.props.trigger;e&&e.forcePopupAlign()},t.prototype.render=function(){var e=this.props,t=e.overlay,n=e.prefixCls,r=e.id;return o.a.createElement("div",{className:n+"-inner",id:r,role:"tooltip"},"function"===typeof t?t():t)},t}(o.a.Component);C.propTypes={prefixCls:g.a.string,overlay:g.a.oneOfType([g.a.node,g.a.func]).isRequired,id:g.a.string,trigger:g.a.any};var E=C,j=function(e){function t(){var n,r,a;f()(this,t);for(var i=arguments.length,l=Array(i),c=0;c<i;c++)l[c]=arguments[c];return n=r=d()(this,e.call.apply(e,[this].concat(l))),r.getPopupElement=function(){var e=r.props,t=e.arrowContent,n=e.overlay,a=e.prefixCls,i=e.id;return[o.a.createElement("div",{className:a+"-arrow",key:"arrow"},t),o.a.createElement(E,{key:"content",trigger:r.trigger,prefixCls:a,id:i,overlay:n})]},r.saveTrigger=function(e){r.trigger=e},a=n,d()(r,a)}return m()(t,e),t.prototype.getPopupDomNode=function(){return this.trigger.getPopupDomNode()},t.prototype.render=function(){var e=this.props,t=e.overlayClassName,n=e.trigger,r=e.mouseEnterDelay,a=e.mouseLeaveDelay,i=e.overlayStyle,c=e.prefixCls,u=e.children,f=e.onVisibleChange,p=e.afterVisibleChange,d=e.transitionName,v=e.animation,m=e.placement,b=e.align,g=e.destroyTooltipOnHide,h=e.defaultVisible,w=e.getTooltipContainer,C=s()(e,["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer"]),E=l()({},C);return"visible"in this.props&&(E.popupVisible=this.props.visible),o.a.createElement(y.a,l()({popupClassName:t,ref:this.saveTrigger,prefixCls:c,popup:this.getPopupElement,action:n,builtinPlacements:O,popupPlacement:m,popupAlign:b,getPopupContainer:w,onPopupVisibleChange:f,afterPopupVisibleChange:p,popupTransitionName:d,popupAnimation:v,defaultPopupVisible:h,destroyPopupOnHide:g,mouseLeaveDelay:a,popupStyle:i,mouseEnterDelay:r},E),u)},t}(r.Component);j.propTypes={trigger:g.a.any,children:g.a.any,defaultVisible:g.a.bool,visible:g.a.bool,placement:g.a.string,transitionName:g.a.oneOfType([g.a.string,g.a.object]),animation:g.a.any,onVisibleChange:g.a.func,afterVisibleChange:g.a.func,overlay:g.a.oneOfType([g.a.node,g.a.func]).isRequired,overlayStyle:g.a.object,overlayClassName:g.a.string,prefixCls:g.a.string,mouseEnterDelay:g.a.number,mouseLeaveDelay:g.a.number,getTooltipContainer:g.a.func,destroyTooltipOnHide:g.a.bool,align:g.a.object,arrowContent:g.a.any,id:g.a.string},j.defaultProps={prefixCls:"rc-tooltip",mouseEnterDelay:0,destroyTooltipOnHide:!1,mouseLeaveDelay:.1,align:{},placement:"right",trigger:["hover"],arrowContent:null};var k=j,P=n(35),T=n.n(P);function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var N={adjustX:1,adjustY:1},S={adjustX:0,adjustY:0},_=[0,0];function R(e){return"boolean"===typeof e?e?N:S:x({},S,e)}var D=n(123);function V(e){return(V="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var F=function(e){function t(e){var n,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,a=A(t).call(this,e),(n=!a||"object"!==V(a)&&"function"!==typeof a?L(o):a).onVisibleChange=function(e){var t=n.props.onVisibleChange;"visible"in n.props||n.setState({visible:!n.isNoTitle()&&e}),t&&!n.isNoTitle()&&t(e)},n.onPopupAlign=function(e,t){var r=n.getPlacements(),o=Object.keys(r).filter(function(e){return r[e].points[0]===t.points[0]&&r[e].points[1]===t.points[1]})[0];if(o){var a=e.getBoundingClientRect(),i={top:"50%",left:"50%"};o.indexOf("top")>=0||o.indexOf("Bottom")>=0?i.top="".concat(a.height-t.offset[1],"px"):(o.indexOf("Top")>=0||o.indexOf("bottom")>=0)&&(i.top="".concat(-t.offset[1],"px")),o.indexOf("left")>=0||o.indexOf("Right")>=0?i.left="".concat(a.width-t.offset[0],"px"):(o.indexOf("right")>=0||o.indexOf("Left")>=0)&&(i.left="".concat(-t.offset[0],"px")),e.style.transformOrigin="".concat(i.left," ").concat(i.top)}},n.saveTooltip=function(e){n.tooltip=e},n.renderTooltip=function(e){var t=e.getPopupContainer,o=e.getPrefixCls,a=L(n),i=a.props,l=a.state,c=i.prefixCls,s=i.title,u=i.overlay,f=i.openClassName,p=i.getPopupContainer,d=i.getTooltipContainer,v=i.children,m=o("tooltip",c),b=l.visible;"visible"in i||!n.isNoTitle()||(b=!1);var g,y,h,w=n.getDisabledCompatibleChildren(r.isValidElement(v)?v:r.createElement("span",null,v)),O=w.props,C=T()(O.className,(g={},y=f||"".concat(m,"-open"),h=!0,y in g?Object.defineProperty(g,y,{value:h,enumerable:!0,configurable:!0,writable:!0}):g[y]=h,g));return r.createElement(k,B({},n.props,{prefixCls:m,getTooltipContainer:p||d||t,ref:n.saveTooltip,builtinPlacements:n.getPlacements(),overlay:u||s||"",visible:b,onVisibleChange:n.onVisibleChange,onPopupAlign:n.onPopupAlign}),b?Object(r.cloneElement)(w,{className:C}):w)},n.state={visible:!!e.visible||!!e.defaultVisible},n}var n,o,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(t,r["Component"]),n=t,a=[{key:"getDerivedStateFromProps",value:function(e){return"visible"in e?{visible:e.visible}:null}}],(o=[{key:"getPopupDomNode",value:function(){return this.tooltip.getPopupDomNode()}},{key:"getPlacements",value:function(){var e=this.props,t=e.builtinPlacements,n=e.arrowPointAtCenter,r=e.autoAdjustOverflow;return t||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.arrowWidth,n=void 0===t?5:t,r=e.horizontalArrowShift,o=void 0===r?16:r,a=e.verticalArrowShift,i=void 0===a?12:a,l=e.autoAdjustOverflow,c=void 0===l||l,s={left:{points:["cr","cl"],offset:[-4,0]},right:{points:["cl","cr"],offset:[4,0]},top:{points:["bc","tc"],offset:[0,-4]},bottom:{points:["tc","bc"],offset:[0,4]},topLeft:{points:["bl","tc"],offset:[-(o+n),-4]},leftTop:{points:["tr","cl"],offset:[-4,-(i+n)]},topRight:{points:["br","tc"],offset:[o+n,-4]},rightTop:{points:["tl","cr"],offset:[4,-(i+n)]},bottomRight:{points:["tr","bc"],offset:[o+n,4]},rightBottom:{points:["bl","cr"],offset:[4,i+n]},bottomLeft:{points:["tl","bc"],offset:[-(o+n),4]},leftBottom:{points:["br","cl"],offset:[-4,i+n]}};return Object.keys(s).forEach(function(t){s[t]=e.arrowPointAtCenter?x({},s[t],{overflow:R(c),targetOffset:_}):x({},O[t],{overflow:R(c)}),s[t].ignoreShake=!0}),s}({arrowPointAtCenter:n,verticalArrowShift:8,autoAdjustOverflow:r})}},{key:"getDisabledCompatibleChildren",value:function(e){if((e.type.__ANT_BUTTON||"button"===e.type)&&e.props.disabled){var t=function(e,t){var n={},r=B({},e);return t.forEach(function(t){e&&t in e&&(n[t]=e[t],delete r[t])}),{picked:n,omitted:r}}(e.props.style,["position","left","right","top","bottom","float","display","zIndex"]),n=t.picked,o=t.omitted,a=B({display:"inline-block"},n,{cursor:"not-allowed",width:e.props.block?"100%":null}),i=B({},o,{pointerEvents:"none"}),l=Object(r.cloneElement)(e,{style:i,className:null});return r.createElement("span",{style:a,className:e.props.className},l)}return e}},{key:"isNoTitle",value:function(){var e=this.props,t=e.title,n=e.overlay;return!t&&!n}},{key:"render",value:function(){return r.createElement(D.a,null,this.renderTooltip)}}])&&H(n.prototype,o),a&&H(n,a),t}();F.defaultProps={placement:"top",transitionName:"zoom-big-fast",mouseEnterDelay:.1,mouseLeaveDelay:.1,arrowPointAtCenter:!1,autoAdjustOverflow:!0},Object(a.polyfill)(F);t.a=F},567:function(e,t,n){"use strict";var r=n(53),o=n(54),a=n(56),i=n(55),l=n(57),c=n(1),s=n.n(c),u=n(129),f=n(128),p=n(659),d=n(6),v=n.n(d),m=n(125),b=n.n(m),g=n(35),y=n.n(g),h=n(450),w=n(462);function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return r=this,o=(e=C(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==typeof o&&"function"!==typeof o?j(r):o,k(j(j(n)),"onHover",function(e){var t=n.props;(0,t.onHover)(e,t.index)}),k(j(j(n)),"onClick",function(e){var t=n.props;(0,t.onClick)(e,t.index)}),k(j(j(n)),"onKeyDown",function(e){var t=n.props,r=t.onClick,o=t.index;13===e.keyCode&&r(e,o)}),n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,s.a.Component),n=t,(r=[{key:"getClassName",value:function(){var e=this.props,t=e.prefixCls,n=e.index,r=e.value,o=e.allowHalf,a=e.focused,i=n+1,l=t;return 0===r&&0===n&&a?l+=" ".concat(t,"-focused"):o&&r+.5===i?(l+=" ".concat(t,"-half ").concat(t,"-active"),a&&(l+=" ".concat(t,"-focused"))):(l+=" ".concat(t,i<=r?"-full":"-zero"),i===r&&a&&(l+=" ".concat(t,"-focused"))),l}},{key:"render",value:function(){var e=this.onHover,t=this.onClick,n=this.onKeyDown,r=this.props,o=r.disabled,a=r.prefixCls,i=r.character,l=r.characterRender,c=r.index,u=r.count,f=r.value,p=s.a.createElement("li",{className:this.getClassName()},s.a.createElement("div",{onClick:o?null:t,onKeyDown:o?null:n,onMouseMove:o?null:e,role:"radio","aria-checked":f>c?"true":"false","aria-posinset":c+1,"aria-setsize":u,tabIndex:0},s.a.createElement("div",{className:"".concat(a,"-first")},i),s.a.createElement("div",{className:"".concat(a,"-second")},i)));return l&&(p=l(p,this.props)),p}}])&&O(n.prototype,r),o&&O(n,o),t}();function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(){}k(P,"propTypes",{value:v.a.number,index:v.a.number,prefixCls:v.a.string,allowHalf:v.a.bool,disabled:v.a.bool,onHover:v.a.func,onClick:v.a.func,character:v.a.node,characterRender:v.a.func,focused:v.a.bool,count:v.a.number});var D=function(e){function t(e){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=x(t).call(this,e),n=!o||"object"!==typeof o&&"function"!==typeof o?S(r):o,_(S(S(n)),"onHover",function(e,t){var r=n.props.onHoverChange,o=n.getStarValue(t,e.pageX);o!==n.state.cleanedValue&&n.setState({hoverValue:o,cleanedValue:null}),r(o)}),_(S(S(n)),"onMouseLeave",function(){var e=n.props.onHoverChange;n.setState({hoverValue:void 0,cleanedValue:null}),e(void 0)}),_(S(S(n)),"onClick",function(e,t){var r=n.props.allowClear,o=n.state.value,a=n.getStarValue(t,e.pageX),i=!1;r&&(i=a===o),n.onMouseLeave(!0),n.changeValue(i?0:a),n.setState({cleanedValue:i?a:null})}),_(S(S(n)),"onFocus",function(){var e=n.props.onFocus;n.setState({focused:!0}),e&&e()}),_(S(S(n)),"onBlur",function(){var e=n.props.onBlur;n.setState({focused:!1}),e&&e()}),_(S(S(n)),"onKeyDown",function(e){var t=e.keyCode,r=n.props,o=r.count,a=r.allowHalf,i=r.onKeyDown,l=n.state.value;t===w.a.RIGHT&&l<o?(l+=a?.5:1,n.changeValue(l),e.preventDefault()):t===w.a.LEFT&&l>0&&(l-=a?.5:1,n.changeValue(l),e.preventDefault()),i&&i(e)}),_(S(S(n)),"saveRef",function(e){return function(t){n.stars[e]=t}}),_(S(S(n)),"saveRate",function(e){n.rate=e});var a=e.value;return void 0===a&&(a=e.defaultValue),n.stars={},n.state={value:a,focused:!1,cleanedValue:null},n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,s.a.Component),n=t,o=[{key:"getDerivedStateFromProps",value:function(e,t){return"value"in e&&void 0!==e.value?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){_(e,t,n[t])})}return e}({},t,{value:e.value}):t}}],(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.autoFocus,n=e.disabled;t&&!n&&this.focus()}},{key:"getStarDOM",value:function(e){return b.a.findDOMNode(this.stars[e])}},{key:"getStarValue",value:function(e,t){var n=e+1;if(this.props.allowHalf){var r=this.getStarDOM(e),o=function(e){var t=function(e){var t,n,r=e.ownerDocument,o=r.body,a=r&&r.documentElement,i=e.getBoundingClientRect();return t=i.left,n=i.top,{left:t-=a.clientLeft||o.clientLeft||0,top:n-=a.clientTop||o.clientTop||0}}(e),n=e.ownerDocument,r=n.defaultView||n.parentWindow;return t.left+=function(e,t){var n=t?e.pageYOffset:e.pageXOffset,r=t?"scrollTop":"scrollLeft";if("number"!==typeof n){var o=e.document;"number"!==typeof(n=o.documentElement[r])&&(n=o.body[r])}return n}(r),t.left}(r);t-o<r.clientWidth/2&&(n-=.5)}return n}},{key:"focus",value:function(){this.props.disabled||this.rate.focus()}},{key:"blur",value:function(){this.props.disabled||this.rate.focus()}},{key:"changeValue",value:function(e){var t=this.props.onChange;"value"in this.props||this.setState({value:e}),t(e)}},{key:"render",value:function(){for(var e=this.props,t=e.count,n=e.allowHalf,r=e.style,o=e.prefixCls,a=e.disabled,i=e.className,l=e.character,c=e.characterRender,u=e.tabIndex,f=this.state,p=f.value,d=f.hoverValue,v=f.focused,m=[],b=a?"".concat(o,"-disabled"):"",g=0;g<t;g++)m.push(s.a.createElement(P,{ref:this.saveRef(g),index:g,count:t,disabled:a,prefixCls:"".concat(o,"-star"),allowHalf:n,value:void 0===d?p:d,onClick:this.onClick,onHover:this.onHover,key:g,character:l,characterRender:c,focused:v}));return s.a.createElement("ul",{className:y()(o,b,i),style:r,onMouseLeave:a?null:this.onMouseLeave,tabIndex:a?-1:u,onFocus:a?null:this.onFocus,onBlur:a?null:this.onBlur,onKeyDown:a?null:this.onKeyDown,ref:this.saveRate,role:"radiogroup"},m)}}])&&T(n.prototype,r),o&&T(n,o),t}();_(D,"propTypes",{disabled:v.a.bool,value:v.a.number,defaultValue:v.a.number,count:v.a.number,allowHalf:v.a.bool,allowClear:v.a.bool,style:v.a.object,prefixCls:v.a.string,onChange:v.a.func,onHoverChange:v.a.func,className:v.a.string,character:v.a.node,characterRender:v.a.func,tabIndex:v.a.number,onFocus:v.a.func,onBlur:v.a.func,onKeyDown:v.a.func,autoFocus:v.a.bool}),_(D,"defaultProps",{defaultValue:0,count:5,allowHalf:!1,allowClear:!0,style:{},prefixCls:"rc-rate",onChange:R,character:"\u2605",onHoverChange:R,tabIndex:0}),Object(h.polyfill)(D);var V=D,H=n(126),A=n(451),L=n(490),M=n(123);function B(e){return(B="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return!t||"object"!==B(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var z=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n},W=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=I(this,K(t).apply(this,arguments))).saveRate=function(t){e.rcRate=t},e.characterRender=function(t,n){var r=n.index,o=e.props.tooltips;return o?c.createElement(L.a,{title:o[r]},t):t},e.renderRate=function(t){var n=t.getPrefixCls,r=e.props,o=r.prefixCls,a=z(r,["prefixCls"]),i=Object(H.a)(a,["tooltips"]);return c.createElement(V,F({ref:e.saveRate,characterRender:e.characterRender},i,{prefixCls:n("rate",o)}))},e}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(t,c["Component"]),n=t,(r=[{key:"focus",value:function(){this.rcRate.focus()}},{key:"blur",value:function(){this.rcRate.blur()}},{key:"render",value:function(){return c.createElement(M.a,null,this.renderRate)}}])&&U(n.prototype,r),o&&U(n,o),t}();W.propTypes={prefixCls:d.string,character:d.node},W.defaultProps={character:c.createElement(A.a,{type:"star",theme:"filled"})};var X=n(459),Y=n(460),J=n.n(Y),G=n(468),Q=n(453),Z=function(e){function t(){var e,n;Object(r.a)(this,t);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return(n=Object(a.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l)))).state={user:n.props.user},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"likeMovie",value:function(e){var t=this,n=this.state.user.favoriteMovies.indexOf(e.toString())>=0;if(!this.state.user.logged)return p.a.error("Login in to add this movie to your favorite movie list",1.5);n?J.a.get("/user/dislike?userId="+this.state.user.userId+"&movieId="+e).then(function(n){0===n.data.code&&(p.a.success("Removed",1.5),t.props.removeFavorite(e.toString()))}).catch(function(e){console.log(e),p.a.error("Something wrong, please try again",1.5)}):J.a.get("/user/like?userId="+this.state.user.userId+"&movieId="+e).then(function(n){0===n.data.code&&(p.a.success("Added",1.5),t.props.addFavorite(e.toString()))}).catch(function(e){console.log(e),p.a.error("Something wrong, please try again",1.5)})}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,r=t.language,o=t.appBackground;if(!n.title||!n.backdrop_path||!n.poster_path)return null;var a=n.title===n.original_title?s.a.createElement("div",{className:"subject-title"},s.a.createElement(f.b,{to:"/detail/"+n.id},s.a.createElement("div",{className:"title-1"},n.title))):s.a.createElement("div",{className:"subject-title"},s.a.createElement(f.b,{to:"/detail/"+n.id},s.a.createElement("div",{className:"title-1"},n.title),s.a.createElement("div",{className:"title-2"},n.original_title))),i=("zh-CN"===r?Q.a.tmdb.genres_cn:Q.a.tmdb.genres_en).filter(function(e){return n.genre_ids?n.genre_ids.indexOf(e.id)>=0:n.genres.indexOf(e.id)>=0}).map(function(e){return e.name}).join(", "),l="zh-CN"===r?{overview:"\u5267\u60c5\u7b80\u4ecb",relase:"\u4e0a\u6620\u65f6\u95f4",genres:"\u7c7b\u522b",no_overviwe:"\u6682\u65e0\u7b80\u4ecb"}:{overview:"Overview",relase:"Relase date",genres:"Genres",no_overviwe:"No overview"},c=o?"app-bg":"subject-hero-bg",u="url(".concat(o?Q.a.tmdb.bgUrl+n.poster_path:Q.a.tmdb.bgUrl+n.backdrop_path,")"),p=this.state.user.favoriteMovies.indexOf(n.id.toString())>=0;return s.a.createElement("section",{className:"subject-header"},s.a.createElement("section",{className:"subject-hero small"},s.a.createElement("div",{className:"subject-hero-container"},s.a.createElement(f.b,{to:"/detail/"+n.id},s.a.createElement("img",{src:Q.a.tmdb.bgUrl+n.poster_path,alt:n.title})),s.a.createElement("div",{className:"subject-hero-info"},a,s.a.createElement("div",{onClick:function(){e.likeMovie(n.id)}},p?s.a.createElement(X.a,{name:"like",className:"like-icon"}):s.a.createElement(X.a,{name:"dislike",className:"like-icon"})),0!==n.vote_average?s.a.createElement(W,{allowHalf:!0,defaultValue:n.vote_average/2,disabled:!0}):s.a.createElement("div",{style:{fontSize:"20px",color:"#fadb14",fontWeight:"blod"}},"No rating"),s.a.createElement("div",{className:"wrap text"},s.a.createElement("span",null,l.overview,": ")," ",n.overview?n.overview.trim():l.no_overviwe),s.a.createElement("div",{className:"text"},s.a.createElement("span",null,l.relase,": "),n.release_date.replace(/-/g,"/")),s.a.createElement("div",{className:"text"},s.a.createElement("span",null,l.genres,": ")," ",i),s.a.createElement("div",{className:"douban-link"},s.a.createElement("a",{href:"https://www.themoviedb.org/movie/"+n.id,target:"_blank",rel:"noopener noreferrer"},s.a.createElement(X.a,{name:"movie"}))))),s.a.createElement("div",{className:c,style:{backgroundImage:u}})))}}],[{key:"getDerivedStateFromProps",value:function(e){return e.user?{user:e.user}:null}}]),t}(c.Component);t.a=Object(u.b)(function(e){return{user:e.user}},function(e){return{addFavorite:function(t){return e(Object(G.a)(t))},removeFavorite:function(t){return e(Object(G.h)(t))}}})(Z)},580:function(e,t,n){"use strict";var r=n(1),o=n.n(r),a=n(567);t.a=function(e){var t=e.results,n=e.language;if(!t)return o.a.createElement("div",null);var r=t.map(function(e){return o.a.createElement("li",{key:e.id},o.a.createElement(a.a,{data:e,language:n}))});return o.a.createElement("ul",null,r)}},582:function(e,t,n){"use strict";var r=n(1),o=n(458),a=n(487),i=n(35),l=n.n(i),c=n(126),s=n(471),u=n.n(s),f=n(123);function p(e){return(p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return!t||"object"!==p(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return w});var y=function(e,t,n,r){var o=n-t;return(e/=r/2)<1?o/2*e*e*e+t:o/2*((e-=2)*e*e+2)+t};function h(){return window}var w=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=m(this,b(t).call(this,e))).getCurrentScrollTop=function(){var e=(n.props.target||h)();return e===window?window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop:e.scrollTop},n.scrollToTop=function(e){var t=n.getCurrentScrollTop(),r=Date.now();u()(function e(){var o=Date.now()-r;n.setScrollTop(y(o,t,0,450)),o<450?u()(e):n.setScrollTop(0)}),(n.props.onClick||function(){})(e)},n.handleScroll=function(){var e=n.props,t=e.visibilityHeight,r=e.target,o=function(e,t){if("undefined"===typeof window)return 0;var n=t?"scrollTop":"scrollLeft",r=e===window,o=r?e[t?"pageYOffset":"pageXOffset"]:e[n];return r&&"number"!==typeof o&&(o=document.documentElement[n]),o}((void 0===r?h:r)(),!0);n.setState({visible:o>t})},n.renderBackTop=function(e){var t=e.getPrefixCls,a=n.props,i=a.prefixCls,s=a.className,u=void 0===s?"":s,f=a.children,p=t("back-top",i),v=l()(p,u),m=r.createElement("div",{className:"".concat(p,"-content")},r.createElement("div",{className:"".concat(p,"-icon")})),b=Object(c.a)(n.props,["prefixCls","className","children","visibilityHeight","target","visible"]),g=("visible"in n.props?n.props.visible:n.state.visible)?r.createElement("div",d({},b,{className:v,onClick:n.scrollToTop}),f||m):null;return r.createElement(o.a,{component:"",transitionName:"fade"},g)},n.state={visible:!1},n}var n,i,s;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,r["Component"]),n=t,(i=[{key:"setScrollTop",value:function(e){var t=(this.props.target||h)();t===window?(document.body.scrollTop=e,document.documentElement.scrollTop=e):t.scrollTop=e}},{key:"componentDidMount",value:function(){var e=this.props.target||h;this.scrollEvent=Object(a.a)(e(),"scroll",this.handleScroll),this.handleScroll()}},{key:"componentWillUnmount",value:function(){this.scrollEvent&&this.scrollEvent.remove()}},{key:"render",value:function(){return r.createElement(f.a,null,this.renderBackTop)}}])&&v(n.prototype,i),s&&v(n,s),t}();w.defaultProps={visibilityHeight:400}},662:function(e,t,n){"use strict";n.r(t);var r=n(53),o=n(54),a=n(56),i=n(55),l=n(57),c=n(1),s=n.n(c),u=n(482),f=n(129),p=n(460),d=n.n(p),v=n(453),m=n(580),b=n(582),g=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(a.a)(this,Object(i.a)(t).call(this))).fetchResult=function(t,n){var r=v.a.tmdb.searchUrl+"?query="+t+"&api_key="+v.a.tmdb.apiKey+"&language="+n+"&page=1";d.a.get(r).then(function(t){e.setState({searchResult:t.data.results,ready:!0})}).catch(function(e){console.log(e)})},e.state={ready:!1,searchResult:[]},e}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e){JSON.stringify(this.props)!==JSON.stringify(e)&&(this.setState({ready:!1}),this.fetchResult(e.match.params.query,e.language))}},{key:"componentDidMount",value:function(){this.fetchResult(this.props.match.params.query,this.props.language)}},{key:"render",value:function(){if(!this.state.ready)return s.a.createElement(u.a,null);var e=this.props,t=e.language,n=e.match;return s.a.createElement("div",null,s.a.createElement("div",{className:"intheater title"},"zh-CN"===t?n.params.query+"\u7684\u641c\u7d22\u7ed3\u679c":"Search result for: "+n.params.query),s.a.createElement(m.a,{results:this.state.searchResult,language:t}),s.a.createElement(b.a,null,s.a.createElement("div",{className:"ant-back-top-inner"},"UP")))}}]),t}(c.Component);t.default=Object(f.b)(function(e){return{language:e.language}})(g)}}]);
//# sourceMappingURL=13.5dc8c0a1.chunk.js.map