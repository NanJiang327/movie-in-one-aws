(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{453:function(e,t,n){"use strict";t.a={douban:{basicUrl:"https://api.douban.com/v2/movie/"},tmdb:{basicUrl:"https://api.themoviedb.org/3/movie/",castUrl:"https://api.themoviedb.org/3/person/",searchUrl:"https://api.themoviedb.org/3/search/movie",backdropUrl:"https://image.tmdb.org/t/p/w1400_and_h450_face",bgUrl:"https://image.tmdb.org/t/p/original/",apiKey:"bb3f5acf00144cfacd624c940807a5c4",genres_en:[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}],genres_cn:[{id:28,name:"\u52a8\u4f5c"},{id:12,name:"\u5192\u9669"},{id:16,name:"\u52a8\u753b"},{id:35,name:"\u559c\u5267"},{id:80,name:"\u72af\u7f6a"},{id:99,name:"\u7eaa\u5f55"},{id:18,name:"\u5267\u60c5"},{id:10751,name:"\u5bb6\u5ead"},{id:14,name:"\u5947\u5e7b"},{id:36,name:"\u5386\u53f2"},{id:27,name:"\u6050\u6016"},{id:10402,name:"\u97f3\u4e50"},{id:9648,name:"\u60ac\u7591"},{id:10749,name:"\u7231\u60c5"},{id:878,name:"\u79d1\u5e7b"},{id:10770,name:"\u7535\u89c6\u7535\u5f71"},{id:53,name:"\u60ca\u609a"},{id:10752,name:"\u6218\u4e89"},{id:37,name:"\u897f\u90e8"}]},HtmlUtil:{htmlEncodeByRegExp:function(e){return 0===e.length?"":e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")},htmlDecodeByRegExp:function(e){return 0===e.length?"":e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;/g," ").replace(/&#39;/g,"'").replace(/&quot;/g,'"')}}}},459:function(e,t,n){"use strict";var o=n(1),r=n.n(o),a=n(6),i=function(e){var t=e.name;return r.a.createElement("svg",{className:"icon-font "+t,"aria-hidden":"true"},r.a.createElement("use",{xlinkHref:"#icon-"+t}))};i.protoType={name:n.n(a).a.string.isRequired},t.a=i},468:function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"i",function(){return f}),n.d(t,"a",function(){return p}),n.d(t,"h",function(){return d}),n.d(t,"c",function(){return m}),n.d(t,"g",function(){return v}),n.d(t,"e",function(){return g}),n.d(t,"f",function(){return b}),n.d(t,"d",function(){return h});var o=n(460),r=n.n(o),a=n(14),i=n(453),l=function(e){return{type:a.f,payload:{nowShowingArr:e}}},c=function(e){return{type:a.h,payload:{upcomingArr:e}}},s=function(e){return{type:a.n,redirectTo:e}},u=function(e){return{type:a.b,language:e}},f=function(e){return{type:a.d,err:e}},p=function(e){return{type:a.a,id:e}},d=function(e){return{type:a.m,id:e}};function m(e,t){return function(n,o){e!==o().type&&n({type:a.c,fetchingType:e}),n({type:a.g});var s=i.a.tmdb.basicUrl+e+"?api_key="+i.a.tmdb.apiKey+"&language="+t+"&page=1&region=AU",u="now_playing"===e;r.a.get(s).then(function(e){var t=e.data.results;return n(u?l(t):c(t))}).catch(function(e){return n({type:a.e,error:!0,payload:e})})}}function v(e){return function(t,n){var o=e.username,i=e.email,l=e.password,c=e.language;r.a.post("/user/register",{username:o,email:i,password:l,language:c}).then(function(e){200===e.status&&0===e.data.code?(t({type:a.l,payload:e.data.data}),t(s("/")),t(u(c)),t(f(""))):t(f(e.data.msg))}).catch(function(e){console.log(e)})}}function g(e){return function(t,n){var o=e.username,i=e.password;r.a.post("/user/login",{username:o,password:i}).then(function(e){200===e.status&&0===e.data.code?(t({type:a.j,payload:e.data.data}),t(s(n().redirectTo)),t(u(e.data.data.language)),t(f(""))):t(f(e.data.msg))}).catch(function(e){console.log(e)})}}function b(){return function(e,t){r.a.get("/user/logout").then(function(t){e({type:a.k})}).catch(function(e){console.log(e)})}}function h(){return function(e,t){r.a.get("/user/info").then(function(t){0===t.data.code&&e({type:a.i,payload:t.data.data})}).catch(function(e){console.log(e)})}}},482:function(e,t,n){"use strict";var o=n(1),r=n.n(o);t.a=function(){return r.a.createElement("div",{className:"loading"},r.a.createElement("div",{className:"left circle"}),r.a.createElement("div",{className:"right circle"}))}},490:function(e,t,n){"use strict";var o=n(1),r=n.n(o),a=n(450),i=n(124),l=n.n(i),c=n(452),s=n.n(c),u=n(447),f=n.n(u),p=n(448),d=n.n(p),m=n(449),v=n.n(m),g=n(6),b=n.n(g),h=n(476),y={adjustX:1,adjustY:1},w=[0,0],O={left:{points:["cr","cl"],overflow:y,offset:[-4,0],targetOffset:w},right:{points:["cl","cr"],overflow:y,offset:[4,0],targetOffset:w},top:{points:["bc","tc"],overflow:y,offset:[0,-4],targetOffset:w},bottom:{points:["tc","bc"],overflow:y,offset:[0,4],targetOffset:w},topLeft:{points:["bl","tl"],overflow:y,offset:[0,-4],targetOffset:w},leftTop:{points:["tr","tl"],overflow:y,offset:[-4,0],targetOffset:w},topRight:{points:["br","tr"],overflow:y,offset:[0,-4],targetOffset:w},rightTop:{points:["tl","tr"],overflow:y,offset:[4,0],targetOffset:w},bottomRight:{points:["tr","br"],overflow:y,offset:[0,4],targetOffset:w},rightBottom:{points:["bl","br"],overflow:y,offset:[4,0],targetOffset:w},bottomLeft:{points:["tl","bl"],overflow:y,offset:[0,4],targetOffset:w},leftBottom:{points:["br","bl"],overflow:y,offset:[-4,0],targetOffset:w}},C=function(e){function t(){return f()(this,t),d()(this,e.apply(this,arguments))}return v()(t,e),t.prototype.componentDidUpdate=function(){var e=this.props.trigger;e&&e.forcePopupAlign()},t.prototype.render=function(){var e=this.props,t=e.overlay,n=e.prefixCls,o=e.id;return r.a.createElement("div",{className:n+"-inner",id:o,role:"tooltip"},"function"===typeof t?t():t)},t}(r.a.Component);C.propTypes={prefixCls:b.a.string,overlay:b.a.oneOfType([b.a.node,b.a.func]).isRequired,id:b.a.string,trigger:b.a.any};var E=C,j=function(e){function t(){var n,o,a;f()(this,t);for(var i=arguments.length,l=Array(i),c=0;c<i;c++)l[c]=arguments[c];return n=o=d()(this,e.call.apply(e,[this].concat(l))),o.getPopupElement=function(){var e=o.props,t=e.arrowContent,n=e.overlay,a=e.prefixCls,i=e.id;return[r.a.createElement("div",{className:a+"-arrow",key:"arrow"},t),r.a.createElement(E,{key:"content",trigger:o.trigger,prefixCls:a,id:i,overlay:n})]},o.saveTrigger=function(e){o.trigger=e},a=n,d()(o,a)}return v()(t,e),t.prototype.getPopupDomNode=function(){return this.trigger.getPopupDomNode()},t.prototype.render=function(){var e=this.props,t=e.overlayClassName,n=e.trigger,o=e.mouseEnterDelay,a=e.mouseLeaveDelay,i=e.overlayStyle,c=e.prefixCls,u=e.children,f=e.onVisibleChange,p=e.afterVisibleChange,d=e.transitionName,m=e.animation,v=e.placement,g=e.align,b=e.destroyTooltipOnHide,y=e.defaultVisible,w=e.getTooltipContainer,C=s()(e,["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer"]),E=l()({},C);return"visible"in this.props&&(E.popupVisible=this.props.visible),r.a.createElement(h.a,l()({popupClassName:t,ref:this.saveTrigger,prefixCls:c,popup:this.getPopupElement,action:n,builtinPlacements:O,popupPlacement:v,popupAlign:g,getPopupContainer:w,onPopupVisibleChange:f,afterPopupVisibleChange:p,popupTransitionName:d,popupAnimation:m,defaultPopupVisible:y,destroyPopupOnHide:b,mouseLeaveDelay:a,popupStyle:i,mouseEnterDelay:o},E),u)},t}(o.Component);j.propTypes={trigger:b.a.any,children:b.a.any,defaultVisible:b.a.bool,visible:b.a.bool,placement:b.a.string,transitionName:b.a.oneOfType([b.a.string,b.a.object]),animation:b.a.any,onVisibleChange:b.a.func,afterVisibleChange:b.a.func,overlay:b.a.oneOfType([b.a.node,b.a.func]).isRequired,overlayStyle:b.a.object,overlayClassName:b.a.string,prefixCls:b.a.string,mouseEnterDelay:b.a.number,mouseLeaveDelay:b.a.number,getTooltipContainer:b.a.func,destroyTooltipOnHide:b.a.bool,align:b.a.object,arrowContent:b.a.any,id:b.a.string},j.defaultProps={prefixCls:"rc-tooltip",mouseEnterDelay:0,destroyTooltipOnHide:!1,mouseLeaveDelay:.1,align:{},placement:"right",trigger:["hover"],arrowContent:null};var k=j,P=n(35),N=n.n(P);function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var S={adjustX:1,adjustY:1},_={adjustX:0,adjustY:0},x=[0,0];function D(e){return"boolean"===typeof e?e?S:_:T({},_,e)}var R=n(123);function V(e){return(V="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var M=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=H(t).call(this,e),(n=!a||"object"!==V(a)&&"function"!==typeof a?F(r):a).onVisibleChange=function(e){var t=n.props.onVisibleChange;"visible"in n.props||n.setState({visible:!n.isNoTitle()&&e}),t&&!n.isNoTitle()&&t(e)},n.onPopupAlign=function(e,t){var o=n.getPlacements(),r=Object.keys(o).filter(function(e){return o[e].points[0]===t.points[0]&&o[e].points[1]===t.points[1]})[0];if(r){var a=e.getBoundingClientRect(),i={top:"50%",left:"50%"};r.indexOf("top")>=0||r.indexOf("Bottom")>=0?i.top="".concat(a.height-t.offset[1],"px"):(r.indexOf("Top")>=0||r.indexOf("bottom")>=0)&&(i.top="".concat(-t.offset[1],"px")),r.indexOf("left")>=0||r.indexOf("Right")>=0?i.left="".concat(a.width-t.offset[0],"px"):(r.indexOf("right")>=0||r.indexOf("Left")>=0)&&(i.left="".concat(-t.offset[0],"px")),e.style.transformOrigin="".concat(i.left," ").concat(i.top)}},n.saveTooltip=function(e){n.tooltip=e},n.renderTooltip=function(e){var t=e.getPopupContainer,r=e.getPrefixCls,a=F(n),i=a.props,l=a.state,c=i.prefixCls,s=i.title,u=i.overlay,f=i.openClassName,p=i.getPopupContainer,d=i.getTooltipContainer,m=i.children,v=r("tooltip",c),g=l.visible;"visible"in i||!n.isNoTitle()||(g=!1);var b,h,y,w=n.getDisabledCompatibleChildren(o.isValidElement(m)?m:o.createElement("span",null,m)),O=w.props,C=N()(O.className,(b={},h=f||"".concat(v,"-open"),y=!0,h in b?Object.defineProperty(b,h,{value:y,enumerable:!0,configurable:!0,writable:!0}):b[h]=y,b));return o.createElement(k,U({},n.props,{prefixCls:v,getTooltipContainer:p||d||t,ref:n.saveTooltip,builtinPlacements:n.getPlacements(),overlay:u||s||"",visible:g,onVisibleChange:n.onVisibleChange,onPopupAlign:n.onPopupAlign}),g?Object(o.cloneElement)(w,{className:C}):w)},n.state={visible:!!e.visible||!!e.defaultVisible},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,o["Component"]),n=t,a=[{key:"getDerivedStateFromProps",value:function(e){return"visible"in e?{visible:e.visible}:null}}],(r=[{key:"getPopupDomNode",value:function(){return this.tooltip.getPopupDomNode()}},{key:"getPlacements",value:function(){var e=this.props,t=e.builtinPlacements,n=e.arrowPointAtCenter,o=e.autoAdjustOverflow;return t||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.arrowWidth,n=void 0===t?5:t,o=e.horizontalArrowShift,r=void 0===o?16:o,a=e.verticalArrowShift,i=void 0===a?12:a,l=e.autoAdjustOverflow,c=void 0===l||l,s={left:{points:["cr","cl"],offset:[-4,0]},right:{points:["cl","cr"],offset:[4,0]},top:{points:["bc","tc"],offset:[0,-4]},bottom:{points:["tc","bc"],offset:[0,4]},topLeft:{points:["bl","tc"],offset:[-(r+n),-4]},leftTop:{points:["tr","cl"],offset:[-4,-(i+n)]},topRight:{points:["br","tc"],offset:[r+n,-4]},rightTop:{points:["tl","cr"],offset:[4,-(i+n)]},bottomRight:{points:["tr","bc"],offset:[r+n,4]},rightBottom:{points:["bl","cr"],offset:[4,i+n]},bottomLeft:{points:["tl","bc"],offset:[-(r+n),4]},leftBottom:{points:["br","cl"],offset:[-4,i+n]}};return Object.keys(s).forEach(function(t){s[t]=e.arrowPointAtCenter?T({},s[t],{overflow:D(c),targetOffset:x}):T({},O[t],{overflow:D(c)}),s[t].ignoreShake=!0}),s}({arrowPointAtCenter:n,verticalArrowShift:8,autoAdjustOverflow:o})}},{key:"getDisabledCompatibleChildren",value:function(e){if((e.type.__ANT_BUTTON||"button"===e.type)&&e.props.disabled){var t=function(e,t){var n={},o=U({},e);return t.forEach(function(t){e&&t in e&&(n[t]=e[t],delete o[t])}),{picked:n,omitted:o}}(e.props.style,["position","left","right","top","bottom","float","display","zIndex"]),n=t.picked,r=t.omitted,a=U({display:"inline-block"},n,{cursor:"not-allowed",width:e.props.block?"100%":null}),i=U({},r,{pointerEvents:"none"}),l=Object(o.cloneElement)(e,{style:i,className:null});return o.createElement("span",{style:a,className:e.props.className},l)}return e}},{key:"isNoTitle",value:function(){var e=this.props,t=e.title,n=e.overlay;return!t&&!n}},{key:"render",value:function(){return o.createElement(R.a,null,this.renderTooltip)}}])&&A(n.prototype,r),a&&A(n,a),t}();M.defaultProps={placement:"top",transitionName:"zoom-big-fast",mouseEnterDelay:.1,mouseLeaveDelay:.1,arrowPointAtCenter:!1,autoAdjustOverflow:!0},Object(a.polyfill)(M);t.a=M},567:function(e,t,n){"use strict";var o=n(53),r=n(54),a=n(56),i=n(55),l=n(57),c=n(1),s=n.n(c),u=n(129),f=n(128),p=n(659),d=n(6),m=n.n(d),v=n(125),g=n.n(v),b=n(35),h=n.n(b),y=n(450),w=n(462);function O(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=function(e){function t(){var e,n,o,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return o=this,r=(e=C(t)).call.apply(e,[this].concat(i)),n=!r||"object"!==typeof r&&"function"!==typeof r?j(o):r,k(j(j(n)),"onHover",function(e){var t=n.props;(0,t.onHover)(e,t.index)}),k(j(j(n)),"onClick",function(e){var t=n.props;(0,t.onClick)(e,t.index)}),k(j(j(n)),"onKeyDown",function(e){var t=n.props,o=t.onClick,r=t.index;13===e.keyCode&&o(e,r)}),n}var n,o,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,s.a.Component),n=t,(o=[{key:"getClassName",value:function(){var e=this.props,t=e.prefixCls,n=e.index,o=e.value,r=e.allowHalf,a=e.focused,i=n+1,l=t;return 0===o&&0===n&&a?l+=" ".concat(t,"-focused"):r&&o+.5===i?(l+=" ".concat(t,"-half ").concat(t,"-active"),a&&(l+=" ".concat(t,"-focused"))):(l+=" ".concat(t,i<=o?"-full":"-zero"),i===o&&a&&(l+=" ".concat(t,"-focused"))),l}},{key:"render",value:function(){var e=this.onHover,t=this.onClick,n=this.onKeyDown,o=this.props,r=o.disabled,a=o.prefixCls,i=o.character,l=o.characterRender,c=o.index,u=o.count,f=o.value,p=s.a.createElement("li",{className:this.getClassName()},s.a.createElement("div",{onClick:r?null:t,onKeyDown:r?null:n,onMouseMove:r?null:e,role:"radio","aria-checked":f>c?"true":"false","aria-posinset":c+1,"aria-setsize":u,tabIndex:0},s.a.createElement("div",{className:"".concat(a,"-first")},i),s.a.createElement("div",{className:"".concat(a,"-second")},i)));return l&&(p=l(p,this.props)),p}}])&&O(n.prototype,o),r&&O(n,r),t}();function N(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(){}k(P,"propTypes",{value:m.a.number,index:m.a.number,prefixCls:m.a.string,allowHalf:m.a.bool,disabled:m.a.bool,onHover:m.a.func,onClick:m.a.func,character:m.a.node,characterRender:m.a.func,focused:m.a.bool,count:m.a.number});var R=function(e){function t(e){var n,o,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,r=T(t).call(this,e),n=!r||"object"!==typeof r&&"function"!==typeof r?_(o):r,x(_(_(n)),"onHover",function(e,t){var o=n.props.onHoverChange,r=n.getStarValue(t,e.pageX);r!==n.state.cleanedValue&&n.setState({hoverValue:r,cleanedValue:null}),o(r)}),x(_(_(n)),"onMouseLeave",function(){var e=n.props.onHoverChange;n.setState({hoverValue:void 0,cleanedValue:null}),e(void 0)}),x(_(_(n)),"onClick",function(e,t){var o=n.props.allowClear,r=n.state.value,a=n.getStarValue(t,e.pageX),i=!1;o&&(i=a===r),n.onMouseLeave(!0),n.changeValue(i?0:a),n.setState({cleanedValue:i?a:null})}),x(_(_(n)),"onFocus",function(){var e=n.props.onFocus;n.setState({focused:!0}),e&&e()}),x(_(_(n)),"onBlur",function(){var e=n.props.onBlur;n.setState({focused:!1}),e&&e()}),x(_(_(n)),"onKeyDown",function(e){var t=e.keyCode,o=n.props,r=o.count,a=o.allowHalf,i=o.onKeyDown,l=n.state.value;t===w.a.RIGHT&&l<r?(l+=a?.5:1,n.changeValue(l),e.preventDefault()):t===w.a.LEFT&&l>0&&(l-=a?.5:1,n.changeValue(l),e.preventDefault()),i&&i(e)}),x(_(_(n)),"saveRef",function(e){return function(t){n.stars[e]=t}}),x(_(_(n)),"saveRate",function(e){n.rate=e});var a=e.value;return void 0===a&&(a=e.defaultValue),n.stars={},n.state={value:a,focused:!1,cleanedValue:null},n}var n,o,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,s.a.Component),n=t,r=[{key:"getDerivedStateFromProps",value:function(e,t){return"value"in e&&void 0!==e.value?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){x(e,t,n[t])})}return e}({},t,{value:e.value}):t}}],(o=[{key:"componentDidMount",value:function(){var e=this.props,t=e.autoFocus,n=e.disabled;t&&!n&&this.focus()}},{key:"getStarDOM",value:function(e){return g.a.findDOMNode(this.stars[e])}},{key:"getStarValue",value:function(e,t){var n=e+1;if(this.props.allowHalf){var o=this.getStarDOM(e),r=function(e){var t=function(e){var t,n,o=e.ownerDocument,r=o.body,a=o&&o.documentElement,i=e.getBoundingClientRect();return t=i.left,n=i.top,{left:t-=a.clientLeft||r.clientLeft||0,top:n-=a.clientTop||r.clientTop||0}}(e),n=e.ownerDocument,o=n.defaultView||n.parentWindow;return t.left+=function(e,t){var n=t?e.pageYOffset:e.pageXOffset,o=t?"scrollTop":"scrollLeft";if("number"!==typeof n){var r=e.document;"number"!==typeof(n=r.documentElement[o])&&(n=r.body[o])}return n}(o),t.left}(o);t-r<o.clientWidth/2&&(n-=.5)}return n}},{key:"focus",value:function(){this.props.disabled||this.rate.focus()}},{key:"blur",value:function(){this.props.disabled||this.rate.focus()}},{key:"changeValue",value:function(e){var t=this.props.onChange;"value"in this.props||this.setState({value:e}),t(e)}},{key:"render",value:function(){for(var e=this.props,t=e.count,n=e.allowHalf,o=e.style,r=e.prefixCls,a=e.disabled,i=e.className,l=e.character,c=e.characterRender,u=e.tabIndex,f=this.state,p=f.value,d=f.hoverValue,m=f.focused,v=[],g=a?"".concat(r,"-disabled"):"",b=0;b<t;b++)v.push(s.a.createElement(P,{ref:this.saveRef(b),index:b,count:t,disabled:a,prefixCls:"".concat(r,"-star"),allowHalf:n,value:void 0===d?p:d,onClick:this.onClick,onHover:this.onHover,key:b,character:l,characterRender:c,focused:m}));return s.a.createElement("ul",{className:h()(r,g,i),style:o,onMouseLeave:a?null:this.onMouseLeave,tabIndex:a?-1:u,onFocus:a?null:this.onFocus,onBlur:a?null:this.onBlur,onKeyDown:a?null:this.onKeyDown,ref:this.saveRate,role:"radiogroup"},v)}}])&&N(n.prototype,o),r&&N(n,r),t}();x(R,"propTypes",{disabled:m.a.bool,value:m.a.number,defaultValue:m.a.number,count:m.a.number,allowHalf:m.a.bool,allowClear:m.a.bool,style:m.a.object,prefixCls:m.a.string,onChange:m.a.func,onHoverChange:m.a.func,className:m.a.string,character:m.a.node,characterRender:m.a.func,tabIndex:m.a.number,onFocus:m.a.func,onBlur:m.a.func,onKeyDown:m.a.func,autoFocus:m.a.bool}),x(R,"defaultProps",{defaultValue:0,count:5,allowHalf:!1,allowClear:!0,style:{},prefixCls:"rc-rate",onChange:D,character:"\u2605",onHoverChange:D,tabIndex:0}),Object(y.polyfill)(R);var V=R,A=n(126),H=n(451),F=n(490),L=n(123);function U(e){return(U="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function B(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function I(e,t){return!t||"object"!==U(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var W=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&(n[o[r]]=e[o[r]])}return n},X=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=I(this,K(t).apply(this,arguments))).saveRate=function(t){e.rcRate=t},e.characterRender=function(t,n){var o=n.index,r=e.props.tooltips;return r?c.createElement(F.a,{title:r[o]},t):t},e.renderRate=function(t){var n=t.getPrefixCls,o=e.props,r=o.prefixCls,a=W(o,["prefixCls"]),i=Object(A.a)(a,["tooltips"]);return c.createElement(V,M({ref:e.saveRate,characterRender:e.characterRender},i,{prefixCls:n("rate",r)}))},e}var n,o,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(t,c["Component"]),n=t,(o=[{key:"focus",value:function(){this.rcRate.focus()}},{key:"blur",value:function(){this.rcRate.blur()}},{key:"render",value:function(){return c.createElement(L.a,null,this.renderRate)}}])&&B(n.prototype,o),r&&B(n,r),t}();X.propTypes={prefixCls:d.string,character:d.node},X.defaultProps={character:c.createElement(H.a,{type:"star",theme:"filled"})};var Y=n(459),q=n(460),G=n.n(q),J=n(468),Q=n(453),Z=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];return(n=Object(a.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l)))).state={user:n.props.user},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"likeMovie",value:function(e){var t=this,n=this.state.user.favoriteMovies.indexOf(e.toString())>=0;if(!this.state.user.logged)return p.a.error("Login in to add this movie to your favorite movie list",1.5);n?G.a.get("/user/dislike?userId="+this.state.user.userId+"&movieId="+e).then(function(n){0===n.data.code&&(p.a.success("Removed",1.5),t.props.removeFavorite(e.toString()))}).catch(function(e){console.log(e),p.a.error("Something wrong, please try again",1.5)}):G.a.get("/user/like?userId="+this.state.user.userId+"&movieId="+e).then(function(n){0===n.data.code&&(p.a.success("Added",1.5),t.props.addFavorite(e.toString()))}).catch(function(e){console.log(e),p.a.error("Something wrong, please try again",1.5)})}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,o=t.language,r=t.appBackground;if(!n.title||!n.backdrop_path||!n.poster_path)return null;var a=n.title===n.original_title?s.a.createElement("div",{className:"subject-title"},s.a.createElement(f.b,{to:"/detail/"+n.id},s.a.createElement("div",{className:"title-1"},n.title))):s.a.createElement("div",{className:"subject-title"},s.a.createElement(f.b,{to:"/detail/"+n.id},s.a.createElement("div",{className:"title-1"},n.title),s.a.createElement("div",{className:"title-2"},n.original_title))),i=("zh-CN"===o?Q.a.tmdb.genres_cn:Q.a.tmdb.genres_en).filter(function(e){return n.genre_ids?n.genre_ids.indexOf(e.id)>=0:n.genres.indexOf(e.id)>=0}).map(function(e){return e.name}).join(", "),l="zh-CN"===o?{overview:"\u5267\u60c5\u7b80\u4ecb",relase:"\u4e0a\u6620\u65f6\u95f4",genres:"\u7c7b\u522b",no_overviwe:"\u6682\u65e0\u7b80\u4ecb"}:{overview:"Overview",relase:"Relase date",genres:"Genres",no_overviwe:"No overview"},c=r?"app-bg":"subject-hero-bg",u="url(".concat(r?Q.a.tmdb.bgUrl+n.poster_path:Q.a.tmdb.bgUrl+n.backdrop_path,")"),p=this.state.user.favoriteMovies.indexOf(n.id.toString())>=0;return s.a.createElement("section",{className:"subject-header"},s.a.createElement("section",{className:"subject-hero small"},s.a.createElement("div",{className:"subject-hero-container"},s.a.createElement(f.b,{to:"/detail/"+n.id},s.a.createElement("img",{src:Q.a.tmdb.bgUrl+n.poster_path,alt:n.title})),s.a.createElement("div",{className:"subject-hero-info"},a,s.a.createElement("div",{onClick:function(){e.likeMovie(n.id)}},p?s.a.createElement(Y.a,{name:"like",className:"like-icon"}):s.a.createElement(Y.a,{name:"dislike",className:"like-icon"})),0!==n.vote_average?s.a.createElement(X,{allowHalf:!0,defaultValue:n.vote_average/2,disabled:!0}):s.a.createElement("div",{style:{fontSize:"20px",color:"#fadb14",fontWeight:"blod"}},"No rating"),s.a.createElement("div",{className:"wrap text"},s.a.createElement("span",null,l.overview,": ")," ",n.overview?n.overview.trim():l.no_overviwe),s.a.createElement("div",{className:"text"},s.a.createElement("span",null,l.relase,": "),n.release_date.replace(/-/g,"/")),s.a.createElement("div",{className:"text"},s.a.createElement("span",null,l.genres,": ")," ",i),s.a.createElement("div",{className:"douban-link"},s.a.createElement("a",{href:"https://www.themoviedb.org/movie/"+n.id,target:"_blank",rel:"noopener noreferrer"},s.a.createElement(Y.a,{name:"movie"}))))),s.a.createElement("div",{className:c,style:{backgroundImage:u}})))}}],[{key:"getDerivedStateFromProps",value:function(e){return e.user?{user:e.user}:null}}]),t}(c.Component);t.a=Object(u.b)(function(e){return{user:e.user}},function(e){return{addFavorite:function(t){return e(Object(J.a)(t))},removeFavorite:function(t){return e(Object(J.h)(t))}}})(Z)},580:function(e,t,n){"use strict";var o=n(1),r=n.n(o),a=n(567);t.a=function(e){var t=e.results,n=e.language;if(!t)return r.a.createElement("div",null);var o=t.map(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(a.a,{data:e,language:n}))});return r.a.createElement("ul",null,o)}},582:function(e,t,n){"use strict";var o=n(1),r=n(458),a=n(487),i=n(35),l=n.n(i),c=n(126),s=n(471),u=n.n(s),f=n(123);function p(e){return(p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function m(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function v(e,t){return!t||"object"!==p(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return w});var h=function(e,t,n,o){var r=n-t;return(e/=o/2)<1?r/2*e*e*e+t:r/2*((e-=2)*e*e+2)+t};function y(){return window}var w=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=v(this,g(t).call(this,e))).getCurrentScrollTop=function(){var e=(n.props.target||y)();return e===window?window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop:e.scrollTop},n.scrollToTop=function(e){var t=n.getCurrentScrollTop(),o=Date.now();u()(function e(){var r=Date.now()-o;n.setScrollTop(h(r,t,0,450)),r<450?u()(e):n.setScrollTop(0)}),(n.props.onClick||function(){})(e)},n.handleScroll=function(){var e=n.props,t=e.visibilityHeight,o=e.target,r=function(e,t){if("undefined"===typeof window)return 0;var n=t?"scrollTop":"scrollLeft",o=e===window,r=o?e[t?"pageYOffset":"pageXOffset"]:e[n];return o&&"number"!==typeof r&&(r=document.documentElement[n]),r}((void 0===o?y:o)(),!0);n.setState({visible:r>t})},n.renderBackTop=function(e){var t=e.getPrefixCls,a=n.props,i=a.prefixCls,s=a.className,u=void 0===s?"":s,f=a.children,p=t("back-top",i),m=l()(p,u),v=o.createElement("div",{className:"".concat(p,"-content")},o.createElement("div",{className:"".concat(p,"-icon")})),g=Object(c.a)(n.props,["prefixCls","className","children","visibilityHeight","target","visible"]),b=("visible"in n.props?n.props.visible:n.state.visible)?o.createElement("div",d({},g,{className:m,onClick:n.scrollToTop}),f||v):null;return o.createElement(r.a,{component:"",transitionName:"fade"},b)},n.state={visible:!1},n}var n,i,s;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,o["Component"]),n=t,(i=[{key:"setScrollTop",value:function(e){var t=(this.props.target||y)();t===window?(document.body.scrollTop=e,document.documentElement.scrollTop=e):t.scrollTop=e}},{key:"componentDidMount",value:function(){var e=this.props.target||y;this.scrollEvent=Object(a.a)(e(),"scroll",this.handleScroll),this.handleScroll()}},{key:"componentWillUnmount",value:function(){this.scrollEvent&&this.scrollEvent.remove()}},{key:"render",value:function(){return o.createElement(f.a,null,this.renderBackTop)}}])&&m(n.prototype,i),s&&m(n,s),t}();w.defaultProps={visibilityHeight:400}},661:function(e,t,n){"use strict";n.r(t);var o=n(53),r=n(54),a=n(56),i=n(55),l=n(57),c=n(1),s=n.n(c),u=n(129),f=n(580),p=n(482),d=n(468),m=n(582),v=function(e){function t(){return Object(o.a)(this,t),Object(a.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchNowShowing(this.props.language)}},{key:"componentWillReceiveProps",value:function(e){this.props.language!==e.language&&("now_playing"===e.type?this.props.fetchNowShowing(e.language):this.props.fetchUpcoming(e.language))}},{key:"render",value:function(){var e=this.props,t=e.fetchNowShowing,n=e.fetchUpcoming,o=e.type,r=e.isFetching,a=e.nowShowingArr,i=e.upcomingArr,l=e.language;if(r)return s.a.createElement(p.a,null);var c="en-AU"===l?{showing:"Now Playing",upcoming:"Upcoming"}:{showing:"\u6b63\u5728\u4e0a\u6620",upcoming:"\u5373\u5c06\u4e0a\u6620"};return s.a.createElement("div",null,s.a.createElement("div",{className:"intheater title"},s.a.createElement("button",{onClick:function(){return t(l)},className:"now_playing"===o?"active":""},c.showing," "),s.a.createElement("span",null," | "),s.a.createElement("button",{onClick:function(){return n(l)},className:"upcoming"===o?"active":""}," ",c.upcoming)),"now_playing"===o?s.a.createElement(f.a,{results:a,language:l}):s.a.createElement(f.a,{results:i,language:l}),s.a.createElement(m.a,null,s.a.createElement("div",{className:"ant-back-top-inner"},"UP")))}}]),t}(c.Component);t.default=Object(u.b)(function(e){return{isFetching:e.isFetching,type:e.type,nowShowingArr:e.nowShowingArr,upcomingArr:e.upcomingArr,language:e.language}},function(e){return{fetchNowShowing:function(t){e(Object(d.c)("now_playing",t))},fetchUpcoming:function(t){e(Object(d.c)("upcoming",t))}}})(v)}}]);
//# sourceMappingURL=12.fee76ff7.chunk.js.map