{"version":3,"sources":["utils/config.js","store/action.js","pages/Login/index.js"],"names":["config","douban","basicUrl","tmdb","castUrl","searchUrl","backdropUrl","bgUrl","apiKey","genres_en","id","name","genres_cn","HtmlUtil","htmlEncodeByRegExp","str","length","replace","htmlDecodeByRegExp","__webpack_require__","d","__webpack_exports__","changeLang","setErrorMsg","addFavorite","removeFavorite","fetchData","register","login","logout","loadData","axios__WEBPACK_IMPORTED_MODULE_0__","axios__WEBPACK_IMPORTED_MODULE_0___default","n","_constants__WEBPACK_IMPORTED_MODULE_1__","_utils_config__WEBPACK_IMPORTED_MODULE_2__","getNowShowingData","res","type","constants","payload","nowShowingArr","getUpcomingData","upcomingArr","setRedirect","redirectTo","language","msg","err","fetchingType","dispatch","getState","api","axios","get","then","results","data","catch","error","values","username","email","password","post","status","code","console","log","Login","state","handleSubmit","e","preventDefault","_this","props","form","validateFields","message","getFieldDecorator","this","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","user","logged","react_router_dom__WEBPACK_IMPORTED_MODULE_13__","to","antd__WEBPACK_IMPORTED_MODULE_9__","onSubmit","className","Item","rules","required","min","max","pattern","RegExp","antd__WEBPACK_IMPORTED_MODULE_10__","prefix","antd__WEBPACK_IMPORTED_MODULE_11__","style","color","placeholder","antd__WEBPACK_IMPORTED_MODULE_12__","htmlType","react_router_dom__WEBPACK_IMPORTED_MODULE_7__","nextProps","prevState","errorMsg","Component","WrappedNormalLoginForm","Form","create","connect"],"mappings":"2FAoMeA,IApMA,CACbC,OAAQ,CACNC,SAAU,oCAEZC,KAAM,CACJD,SAAU,sCACVE,QAAS,uCACTC,UAAW,4CACXC,YAAa,iDACbC,MAAO,uCACPC,OAAQ,mCACRC,UAAW,CACT,CACEC,GAAI,GACJC,KAAM,UAER,CACED,GAAI,GACJC,KAAM,aAER,CACED,GAAI,GACJC,KAAM,aAER,CACED,GAAI,GACJC,KAAM,UAER,CACED,GAAI,GACJC,KAAM,SAER,CACED,GAAI,GACJC,KAAM,eAER,CACED,GAAI,GACJC,KAAM,SAER,CACED,GAAI,MACJC,KAAM,UAER,CACED,GAAI,GACJC,KAAM,WAER,CACED,GAAI,GACJC,KAAM,WAER,CACED,GAAI,GACJC,KAAM,UAER,CACED,GAAI,MACJC,KAAM,SAER,CACED,GAAI,KACJC,KAAM,WAER,CACED,GAAI,MACJC,KAAM,WAER,CACED,GAAI,IACJC,KAAM,mBAER,CACED,GAAI,MACJC,KAAM,YAER,CACED,GAAI,GACJC,KAAM,YAER,CACED,GAAI,MACJC,KAAM,OAER,CACED,GAAI,GACJC,KAAM,YAGVC,UAAY,CACV,CACEF,GAAM,GACNC,KAAQ,gBAEV,CACED,GAAM,GACNC,KAAQ,gBAEV,CACED,GAAM,GACNC,KAAQ,gBAEV,CACED,GAAM,GACNC,KAAQ,gBAEV,CACED,GAAM,GACNC,KAAQ,gBAEV,CACED,GAAM,GACNC,KAAQ,gBAEV,CACED,GAAM,GACNC,KAAQ,gBAEV,CACED,GAAM,MACNC,KAAQ,gBAEV,CACED,GAAM,GACNC,KAAQ,gBAEV,CACED,GAAM,GACNC,KAAQ,gBAEV,CACED,GAAM,GACNC,KAAQ,gBAEV,CACED,GAAM,MACNC,KAAQ,gBAEV,CACED,GAAM,KACNC,KAAQ,gBAEV,CACED,GAAM,MACNC,KAAQ,gBAEV,CACED,GAAM,IACNC,KAAQ,gBAEV,CACED,GAAM,MACNC,KAAQ,4BAEV,CACED,GAAM,GACNC,KAAQ,gBAEV,CACED,GAAM,MACNC,KAAQ,gBAEV,CACED,GAAM,GACNC,KAAQ,kBAKdE,SAAU,C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","file":"static/js/14.e3658587.chunk.js","sourcesContent":["const config = {\r\n  douban: {\r\n    basicUrl: 'https://api.douban.com/v2/movie/',\r\n  },\r\n  tmdb: {\r\n    basicUrl: 'https://api.themoviedb.org/3/movie/',\r\n    castUrl: 'https://api.themoviedb.org/3/person/',\r\n    searchUrl: 'https://api.themoviedb.org/3/search/movie',\r\n    backdropUrl: 'https://image.tmdb.org/t/p/w1400_and_h450_face',\r\n    bgUrl: 'https://image.tmdb.org/t/p/original/',\r\n    apiKey: 'bb3f5acf00144cfacd624c940807a5c4',\r\n    genres_en: [\r\n      {\r\n        id: 28,\r\n        name: \"Action\"\r\n      },\r\n      {\r\n        id: 12,\r\n        name: \"Adventure\"\r\n      },\r\n      {\r\n        id: 16,\r\n        name: \"Animation\"\r\n      },\r\n      {\r\n        id: 35,\r\n        name: \"Comedy\"\r\n      },\r\n      {\r\n        id: 80,\r\n        name: \"Crime\"\r\n      },\r\n      {\r\n        id: 99,\r\n        name: \"Documentary\"\r\n      },\r\n      {\r\n        id: 18,\r\n        name: \"Drama\"\r\n      },\r\n      {\r\n        id: 10751,\r\n        name: \"Family\"\r\n      },\r\n      {\r\n        id: 14,\r\n        name: \"Fantasy\"\r\n      },\r\n      {\r\n        id: 36,\r\n        name: \"History\"\r\n      },\r\n      {\r\n        id: 27,\r\n        name: \"Horror\"\r\n      },\r\n      {\r\n        id: 10402,\r\n        name: \"Music\"\r\n      },\r\n      {\r\n        id: 9648,\r\n        name: \"Mystery\"\r\n      },\r\n      {\r\n        id: 10749,\r\n        name: \"Romance\"\r\n      },\r\n      {\r\n        id: 878,\r\n        name: \"Science Fiction\"\r\n      },\r\n      {\r\n        id: 10770,\r\n        name: \"TV Movie\"\r\n      },\r\n      {\r\n        id: 53,\r\n        name: \"Thriller\"\r\n      },\r\n      {\r\n        id: 10752,\r\n        name: \"War\"\r\n      },\r\n      {\r\n        id: 37,\r\n        name: \"Western\"\r\n      }\r\n    ],\r\n    genres_cn:  [\r\n      {\r\n        \"id\": 28,\r\n        \"name\": \"动作\"\r\n      },\r\n      {\r\n        \"id\": 12,\r\n        \"name\": \"冒险\"\r\n      },\r\n      {\r\n        \"id\": 16,\r\n        \"name\": \"动画\"\r\n      },\r\n      {\r\n        \"id\": 35,\r\n        \"name\": \"喜剧\"\r\n      },\r\n      {\r\n        \"id\": 80,\r\n        \"name\": \"犯罪\"\r\n      },\r\n      {\r\n        \"id\": 99,\r\n        \"name\": \"纪录\"\r\n      },\r\n      {\r\n        \"id\": 18,\r\n        \"name\": \"剧情\"\r\n      },\r\n      {\r\n        \"id\": 10751,\r\n        \"name\": \"家庭\"\r\n      },\r\n      {\r\n        \"id\": 14,\r\n        \"name\": \"奇幻\"\r\n      },\r\n      {\r\n        \"id\": 36,\r\n        \"name\": \"历史\"\r\n      },\r\n      {\r\n        \"id\": 27,\r\n        \"name\": \"恐怖\"\r\n      },\r\n      {\r\n        \"id\": 10402,\r\n        \"name\": \"音乐\"\r\n      },\r\n      {\r\n        \"id\": 9648,\r\n        \"name\": \"悬疑\"\r\n      },\r\n      {\r\n        \"id\": 10749,\r\n        \"name\": \"爱情\"\r\n      },\r\n      {\r\n        \"id\": 878,\r\n        \"name\": \"科幻\"\r\n      },\r\n      {\r\n        \"id\": 10770,\r\n        \"name\": \"电视电影\"\r\n      },\r\n      {\r\n        \"id\": 53,\r\n        \"name\": \"惊悚\"\r\n      },\r\n      {\r\n        \"id\": 10752,\r\n        \"name\": \"战争\"\r\n      },\r\n      {\r\n        \"id\": 37,\r\n        \"name\": \"西部\"\r\n      }\r\n    ]\r\n  },\r\n\r\n  HtmlUtil: {\r\n    htmlEncodeByRegExp:function (str){  \r\n         var s = \"\";\r\n         if(str.length === 0) return \"\";\r\n         s = str.replace(/&/g,\"&amp;\");\r\n         s = s.replace(/</g,\"&lt;\");\r\n         s = s.replace(/>/g,\"&gt;\");\r\n         s = s.replace(/ /g,\"&nbsp;\");\r\n         s = s.replace(/'/g,\"&#39;\");\r\n         s = s.replace(/\"/g,\"&quot;\");\r\n         return s;  \r\n   },\r\n   htmlDecodeByRegExp:function (str){  \r\n         var s = \"\";\r\n         if(str.length === 0) return \"\";\r\n         s = str.replace(/&amp;/g,\"&\");\r\n         s = s.replace(/&lt;/g,\"<\");\r\n         s = s.replace(/&gt;/g,\">\");\r\n         s = s.replace(/&nbsp;/g,\" \");\r\n         s = s.replace(/&#39;/g,\"'\");\r\n         s = s.replace(/&quot;/g,\"\\\"\");\r\n         return s;  \r\n   }\r\n  } \r\n\r\n}  \r\n\r\nexport default config","import axios from 'axios'\r\nimport * as constants from './constants'\r\nimport config from '../utils/config'\r\n\r\nconst getNowShowingData = (res) => ({\r\n  type: constants.FETCH_NOWSHOWING_COMPLETED,\r\n  payload: {\r\n    nowShowingArr: res\r\n  }\r\n})\r\n\r\nconst getUpcomingData = (res) => ({\r\n  type: constants.FETCH_UPCOMING_COMPLETED,\r\n  payload: {\r\n    upcomingArr: res\r\n  }\r\n})\r\n\r\nexport const setRedirect = (redirectTo) => ({\r\n  type: constants.SET_REDIRECT,\r\n  redirectTo\r\n})\r\n\r\nexport const changeLang = (language) => ({\r\n  type: constants.CHANGE_LANG,\r\n  language\r\n})\r\n\r\nexport const setErrorMsg = (msg) => ({\r\n  type: constants.ERROR_MESSAGE,\r\n  err: msg\r\n})\r\n\r\nexport const addFavorite = (id) => ({\r\n  type: constants.ADD_FAVORITE,\r\n  id\r\n})\r\n\r\nexport const removeFavorite = (id) => ({\r\n  type: constants.REMOVE_FAVORITE,\r\n  id\r\n})\r\n\r\nexport function fetchData(fetchingType, language) {\r\n  return (dispatch, getState) => {\r\n    if (fetchingType !== getState().type) {\r\n       dispatch({\r\n        type: constants.CHANGE_TYPE,\r\n        fetchingType\r\n      })\r\n    }\r\n    \r\n    dispatch({\r\n      type: constants.FETCH_STARTED\r\n    });\r\n\r\n    const api = config.tmdb.basicUrl + fetchingType +'?api_key=' + config.tmdb.apiKey + '&language='+ language +'&page=1&region=AU'\r\n    const type = fetchingType === 'now_playing' \r\n\r\n    axios.get(api)\r\n      .then(res => {\r\n        const results = res.data.results;\r\n        if (type) {\r\n          return dispatch(getNowShowingData(results))\r\n        } else {\r\n          return dispatch(getUpcomingData(results))\r\n        }\r\n      })\r\n      .catch(err => {\r\n        return dispatch({\r\n          type: constants.FETCH_FAILED,\r\n          error: true,\r\n          payload: err\r\n        });\r\n      })\r\n    \r\n  }\r\n}\r\n\r\nexport function register(values) {\r\n  return (dispatch, getState) => {\r\n    const {username, email, password, language} = values\r\n    axios.post('/user/register', {username, email, password, language })\r\n      .then(res => {\r\n        if (res.status === 200 && res.data.code === 0) {\r\n          dispatch({\r\n              type: constants.REGISTER,\r\n              payload: res.data.data\r\n          })\r\n          dispatch(setRedirect('/'))\r\n          dispatch(changeLang(language))\r\n          dispatch(setErrorMsg(''))\r\n        } else {\r\n          dispatch(setErrorMsg(res.data.msg))\r\n        }\r\n      })\r\n      .catch(err =>{\r\n        console.log(err)\r\n      })\r\n  }\r\n}\r\n\r\nexport function login(values) {\r\n  return (dispatch, getState) => {\r\n    const { username, password } = values\r\n    axios.post('/user/login', {username, password})\r\n      .then(res => {\r\n        if (res.status === 200 && res.data.code === 0) {\r\n          dispatch({\r\n              type: constants.LOGIN,\r\n              payload: res.data.data\r\n          })\r\n          dispatch(setRedirect(getState().redirectTo))\r\n          dispatch(changeLang(res.data.data.language))\r\n          dispatch(setErrorMsg(''))\r\n        } else {\r\n          dispatch(setErrorMsg(res.data.msg))\r\n        }\r\n      })\r\n      .catch(err =>{\r\n        console.log(err)\r\n      })\r\n  }\r\n}\r\n\r\nexport function logout() {\r\n  return (dispatch, getState) => {\r\n    axios.get('/user/logout')\r\n      .then(res => {\r\n        dispatch({\r\n          type: constants.LOGOUT\r\n        })\r\n      })\r\n      .catch(err =>{\r\n        console.log(err)\r\n      })\r\n  }\r\n}\r\n\r\nexport function loadData() {\r\n  return (dispatch, getState) => {\r\n    axios.get('/user/info')\r\n      .then(res => {\r\n        if (res.data.code === 0) {\r\n          dispatch({\r\n            type: constants.LOAD_DATA,\r\n            payload: res.data.data\r\n          })\r\n        }\r\n      })\r\n      .catch(err =>{\r\n        console.log(err)\r\n      })\r\n  }\r\n}\r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\nimport {\r\n  Form, Icon, Input, Button, message\r\n} from 'antd';\r\nimport { Redirect } from 'react-router-dom'\r\nimport  { login, setErrorMsg } from '../../store/action'\r\n\r\nclass Login extends Component {\r\n\r\n  state = {\r\n    \r\n  }\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    this.props.form.validateFields((err, values) => {\r\n      if (!err) {\r\n        this.props.login(values)\r\n      } else {\r\n        message.error('Please check your input.', 2)\r\n      }\r\n    });\r\n  }\r\n\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    if (nextProps.errorMsg !== '') {\r\n      message.error(nextProps.errorMsg, 2)\r\n      return nextProps.setErrorMsg('')\r\n    }\r\n    \r\n    return null\r\n  }\r\n\r\n  render() {\r\n    const { getFieldDecorator } = this.props.form;\r\n    return (\r\n      <div>\r\n        {this.props.user.logged ? <Redirect to={this.props.redirectTo} /> : null}\r\n        <Form onSubmit={this.handleSubmit} className=\"login-form\">\r\n          <Form.Item>\r\n            {getFieldDecorator('username', {\r\n              rules: [\r\n                { required: true, message: 'Please input your username!' },\r\n                {\r\n                  min: 5, max: 10,\r\n                  message: 'The length of username should between 5 and 10.'\r\n                }, {\r\n                  pattern:new RegExp('^\\\\w+$','g'),\r\n                  message:'The usernmae can only contain number and characters.'\r\n                }\r\n              ],\r\n            })(\r\n              <Input prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />} placeholder=\"Username\" />\r\n            )}\r\n          </Form.Item>\r\n          <Form.Item>\r\n            {getFieldDecorator('password', {\r\n              rules: [\r\n                { required: true, message: 'Please input your Password!' },\r\n                {\r\n                  min: 5,\r\n                  message: 'The length of password should greater than 5.'\r\n                }, \r\n              ],\r\n            })(\r\n              <Input prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />} type=\"password\" placeholder=\"Password\" />\r\n            )}\r\n          </Form.Item>\r\n          <Form.Item>\r\n            {/* {getFieldDecorator('remember', {\r\n              valuePropName: 'checked',\r\n              initialValue: true,\r\n            })(\r\n              <Checkbox className=\"label\">Remember me</Checkbox>\r\n            )}\r\n            <a className=\"login-form-forgot\" href=\"/\">Forgot password</a> */}\r\n            <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\r\n              Log in\r\n            </Button>\r\n            <span className=\"label\">Or </span>\r\n            <Link to='/register' >register now!</Link>\r\n          </Form.Item>\r\n        </Form>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst WrappedNormalLoginForm = Form.create({ name: 'normal_login' })(Login);\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    user: state.user,\r\n    redirectTo: state.redirectTo,\r\n    errorMsg: state.errorMsg\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    login: (values) => dispatch(login(values)),\r\n    setErrorMsg: (msg) => dispatch(setErrorMsg(msg))\r\n  };\r\n}\r\n\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(WrappedNormalLoginForm);"],"sourceRoot":""}